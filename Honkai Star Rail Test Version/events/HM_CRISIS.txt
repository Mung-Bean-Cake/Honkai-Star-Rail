namespace = DDT_FY
###### 天灾启动
#country_event DDT_FY.10
###### 事件链开始
#提醒事件
country_event = {
    id = DDT_FY.1
    title = DDT_FY.1_name
    desc = DDT_FY.1_desc
    picture = GFX_evt_glitchy_matrix
    is_triggered_only = yes

    option = {
        name = OK
        owner = {
            begin_event_chain = {
                event_chain = "antimatter_legion_chain"
                target = this
            }
        }
    }
}
country_event = {
    id = DDT_FY.2
    title = DDT_FY.2_name
    desc = DDT_FY.2_desc
    picture = GFX_evt_glitchy_matrix
    is_triggered_only = yes

    option = {
        name = DDT_FY.2_name_one
        add_resource = {
            influence = 100
            unity = -3000
        }
        owner = {
            add_event_chain_counter = {
                event_chain = "antimatter_legion_chain"
                counter = "antimatter_jz"
                amount = 1
            }
        }
    }
    option = {
        name = DDT_FY.2_name_two
        add_modifier = { modifier = Unknown_risk1  days = 600 }
        owner = {
            add_event_chain_counter = {
                event_chain = "antimatter_legion_chain"
                counter = "antimatter_jz"
                amount = 1
            }
        }
    }
}
country_event = {
    id = DDT_FY.3
    title = DDT_FY.3_name
    desc = DDT_FY.3_desc
    picture = GFX_evt_crisis_2
    is_triggered_only = yes

    option = {
        name = DDT_FY.3_name_one
        owner = {
            add_event_chain_counter = {
                event_chain = "antimatter_legion_chain"
                counter = "antimatter_jz"
                amount = 1
            }
        }
    }
}
country_event = {
    id = DDT_FY.4
    title = DDT_FY.4_name
    desc = DDT_FY.4_desc
    picture = GFX_evt_crisis_2
    is_triggered_only = yes

    trigger = {
        is_ai = no
    }

    option = {
        name = DDT_FY.4_name_one
        #hidden_effect = {
        #    country_event = { id = DDT_FY.11 days = 10 }
        #    country_event = { id = DDT_FY.13 days = 20 }
        #    country_event = { id = DDT_FY.14 days = 30 }
        #    country_event = { id = DDT_FY.15 days = 40 }
        #    country_event = { id = DDT_FY.16 days = 50 }
        #    country_event = { id = DDT_FY.17 days = 60 }
        #    country_event = { id = DDT_FY.18 days = 70 }
        #    country_event = { id = DDT_FY.19 days = 80 }
        #    country_event = { id = DDT_FY.20 days = 90 }
        #}
        owner = {
            add_event_chain_counter = {
                event_chain = "antimatter_legion_chain"
                counter = "antimatter_jz"
                amount = 1
            }
        }
    }
    immediate = {
        hidden_effect = {
            country_event = { id = DDT_FY.11 days = 10 }
            every_country = { country_event = { id = DDT_FY.201 days = 10 } }
            country_event = { id = DDT_FY.13 days = 30 }
            every_country = { country_event = { id = DDT_FY.202 days = 30 } }
            country_event = { id = DDT_FY.14 days = 60 }
            every_country = { country_event = { id = DDT_FY.203 days = 60 } }
            country_event = { id = DDT_FY.15 days = 90 }
            every_country = { country_event = { id = DDT_FY.204 days = 90 } }
            country_event = { id = DDT_FY.16 days = 100 }
            every_country = { country_event = { id = DDT_FY.205 days = 120 } }
            country_event = { id = DDT_FY.17 days = 150 }
            every_country = { country_event = { id = DDT_FY.206 days = 150 } }
            country_event = { id = DDT_FY.18 days = 180 }
            every_country = { country_event = { id = DDT_FY.207 days = 180 } }
            country_event = { id = DDT_FY.19 days = 210 }
            every_country = { country_event = { id = DDT_FY.208 days = 210 } }
            country_event = { id = DDT_FY.20 days = 250 }
            every_country = { country_event = { id = DDT_FY.209 days = 250 } }
        }
    }
}
country_event = {
    id = DDT_FY.8
    title = DDT_FY.8_name
    desc = DDT_FY.8_desc
    diplomatic = yes

    picture_event_data = {
        portrait = huimie
        room = didui_0_room
    }

    is_triggered_only = yes

    option = {
        name = DDT_FY.8_name_one
    }
    option = {
        name = DDT_FY.8_name_two
    }
    option = {
        name = DDT_FY.8_name_three
    }
}
##############   准备开始，提醒，刷天灾星系
country_event = {
    id = DDT_FY.10
    is_triggered_only = yes
    hide_window = yes
    fire_only_once = yes

    trigger = {
        is_ai = no
        is_antimatter_must = yes
        event_target:global_event_country = {
            NOR = {
                check_variable = { which = XQTD_crisis_stage value = 0}
            }
        }
    }

    immediate = {
        set_global_flag = xt_antimatter_legion
        remove_country_flag = allow_set_xt_crisis_global
        every_country = {
            limit = { is_antimatter_must = yes }
            country_event = { id = DDT_FY.1 }
        }
        every_country = {
            limit = { is_antimatter_must = yes }
            country_event = { id = DDT_FY.2 days = 300 random = 50 }
        }
        every_country = {
            limit = { is_antimatter_must = yes }
            country_event = { id = DDT_FY.3 days = 600 random = 50 }
        }
        every_country = {
            limit = { is_antimatter_must = yes }
            country_event = { id = DDT_FY.8 days = 900 }
        }
        every_country = {
            limit = { is_antimatter_must = yes }
            country_event = { id = DDT_FY.4 days = 910 }
        }
    }
}
#选择目标星系
country_event = {
    id = DDT_FY.11
    is_triggered_only = yes
    hide_window = yes
    fire_only_once = yes

    immediate = {
        random_system = {
            limit = {
                has_planet_class = pc_gaia
            }
            set_star_flag = first_star_order
            set_spawn_system_batch = begin
            spawn_system = {
                min_distance = 10
                max_distance = 12
                initializer = antimatter_legion_Sub_galaxies
                effect = {
                    set_name = "NAME_FENFENG"
                    save_global_event_target_as = antimatter_legion_Sub_galaxies1
                    random_system_planet = {
                        limit = {
                            has_planet_flag = born_antimatter_legion
                        }
                        planet_event = { id = DDT_FY.21  days = 10 }
                    }
                }
            }
            set_spawn_system_batch = end
            add_hyperlane = {
                from = event_target:antimatter_legion_Sub_galaxies1
                to = This
            }
        }
    }
}
country_event = {
    id = DDT_FY.13
    hide_window = yes
    is_triggered_only = yes
    immediate = {
        random_system = {
            limit = {
            }
            set_star_flag = second_star_order
            set_spawn_system_batch = begin
            spawn_system = {
                min_distance = 10
                max_distance = 12
                initializer = antimatter_legion_Sub_galaxies
                effect = {
                    set_name = "NAME_XINGXIAO"
                    save_global_event_target_as = antimatter_legion_Sub_galaxies2
                    random_system_planet = {
                        limit = {
                            has_planet_flag = born_antimatter_legion
                        }
                        planet_event = { id = DDT_FY.22 days = 20 }
                    }
                }
            }
            set_spawn_system_batch = end
            add_hyperlane = {
                from = event_target:antimatter_legion_Sub_galaxies2
                to = This
            }
        }
    }
}
country_event = {
    id = DDT_FY.14
    hide_window = yes
    is_triggered_only = yes
    immediate = {
        random_system = {
            if = {
                limit = {
                    is_capital_system = yes
                    #exists = starbase
                    #is_owned_by = Root
                    Root = {
                        owner_main_species = {
                            OR = {
                                is_archetype = ROBOT
                                is_archetype = MACHINE
                            }
                        }
                    }
                }
                set_star_flag = third_star_order
                set_spawn_system_batch = begin
                spawn_system = {
                    min_distance = 10
                    max_distance = 12
                    initializer = antimatter_legion_Sub_galaxies
                    effect = {
                        set_name = "NAME_TIEMU"
                        save_global_event_target_as = antimatter_legion_Sub_galaxies3
                        random_system_planet = {
                            limit = {
                                has_planet_flag = born_antimatter_legion
                            }
                            planet_event = { id = DDT_FY.23 days = 30 }
                        }
                    }
                }
                set_spawn_system_batch = end
                add_hyperlane = {
                    from = event_target:antimatter_legion_Sub_galaxies3
                    to = This
                }
            }
            else = {
                set_star_flag = third_star_order
                set_spawn_system_batch = begin
                spawn_system = {
                    min_distance = 10
                    max_distance = 12
                    initializer = antimatter_legion_Sub_galaxies
                    effect = {
                        set_name = "NAME_TIEMU"
                        save_global_event_target_as = antimatter_legion_Sub_galaxies3
                        random_system_planet = {
                            limit = {
                                has_planet_flag = born_antimatter_legion
                            }
                            planet_event = { id = DDT_FY.23 days = 30 }
                        }
                    }
                }
                set_spawn_system_batch = end
                add_hyperlane = {
                    from = event_target:antimatter_legion_Sub_galaxies3
                    to = This
                }
            }
        }
    }
}
country_event = {
    id = DDT_FY.15
    hide_window = yes
    is_triggered_only = yes
    immediate = {
        random_system = {
            if = {
                limit = {
                    is_capital_system = yes
                    #exists = starbase
                    #is_owned_by = Root
                    Root = {
                        has_ethic = ethic_fanatic_spiritualist
                    }
                }
                set_star_flag = fourth_star_order
                set_spawn_system_batch = begin
                spawn_system = {
                    min_distance = 10
                    max_distance = 12
                    initializer = antimatter_legion_Sub_galaxies
                    effect = {
                        set_name = "NAME_DUSHEN"
                        save_global_event_target_as = antimatter_legion_Sub_galaxies4
                        random_system_planet = {
                            limit = {
                                has_planet_flag = born_antimatter_legion
                            }
                            planet_event = { id = DDT_FY.24 days = 40 }
                        }
                    }
                }
                set_spawn_system_batch = end
                add_hyperlane = {
                    from = event_target:antimatter_legion_Sub_galaxies4
                    to = This
                }
            }
            else_if = {
                limit = {
                    is_capital_system = yes
                    #exists = starbase
                    #is_owned_by = Root
                    Root = {
                        has_ethic = ethic_spiritualist
                    }
                }
                set_star_flag = fourth_star_order
                set_spawn_system_batch = begin
                spawn_system = {
                    min_distance = 10
                    max_distance = 12
                    initializer = antimatter_legion_Sub_galaxies
                    effect = {
                        set_name = "NAME_DUSHEN"
                        save_global_event_target_as = antimatter_legion_Sub_galaxies4
                        random_system_planet = {
                            limit = {
                                has_planet_flag = born_antimatter_legion
                            }
                            planet_event = { id = DDT_FY.24 days = 40 }
                        }
                    }
                }
                set_spawn_system_batch = end
                add_hyperlane = {
                    from = event_target:antimatter_legion_Sub_galaxies4
                    to = This
                }
            }
            else = {
                set_star_flag = fourth_star_order
                set_spawn_system_batch = begin
                spawn_system = {
                    min_distance = 10
                    max_distance = 12
                    initializer = antimatter_legion_Sub_galaxies
                    effect = {
                        set_name = "NAME_DUSHEN"
                        save_global_event_target_as = antimatter_legion_Sub_galaxies4
                        random_system_planet = {
                            limit = {
                                has_planet_flag = born_antimatter_legion
                            }
                            planet_event = { id = DDT_FY.24 days = 40 }
                        }
                    }
                }
                set_spawn_system_batch = end
                add_hyperlane = {
                    from = event_target:antimatter_legion_Sub_galaxies4
                    to = This
                }
            }
        }
    }
}
country_event = {
    id = DDT_FY.16
    hide_window = yes
    is_triggered_only = yes
    immediate = {
        random_system = {
            limit = {
            }
            set_star_flag = fifth_star_order
            set_spawn_system_batch = begin
            spawn_system = {
                min_distance = 10
                max_distance = 12
                initializer = antimatter_legion_Sub_galaxies
                effect = {
                    set_name = "NAME_ZHIZUO"
                    save_global_event_target_as = antimatter_legion_Sub_galaxies5
                    random_system_planet = {
                        limit = {
                            has_planet_flag = born_antimatter_legion
                        }
                        planet_event = { id = DDT_FY.25 days = 50 }
                    }
                }
            }
            set_spawn_system_batch = end
            add_hyperlane = {
                from = event_target:antimatter_legion_Sub_galaxies5
                to = This
            }
        }
    }
}
country_event = {
    id = DDT_FY.17
    hide_window = yes
    is_triggered_only = yes
    immediate = {
        random_system = {
            limit = {
                count_system_planet = {
                    limit = {
                        is_star = yes
                    }
                    count >= 2
                }
            }
            set_star_flag = sixth_star_order
            set_spawn_system_batch = begin
            spawn_system = {
                min_distance = 10
                max_distance = 12
                initializer = antimatter_legion_Sub_galaxies
                effect = {
                    set_name = "NAME_TUNXING"
                    save_global_event_target_as = antimatter_legion_Sub_galaxies6
                    random_system_planet = {
                        limit = {
                            has_planet_flag = born_antimatter_legion
                        }
                        planet_event = { id = DDT_FY.26 days = 60 }
                    }
                }
            }
            set_spawn_system_batch = end
            add_hyperlane = {
                from = event_target:antimatter_legion_Sub_galaxies6
                to = This
            }
        }
    }
}
country_event = {
    id = DDT_FY.18
    hide_window = yes
    is_triggered_only = yes
    immediate = {
        random_system = {
            limit = {
                star = {
                    is_star_class = sc_black_hole
                }
            }
            set_star_flag = seventh_star_order
            set_spawn_system_batch = begin
            spawn_system = {
                min_distance = 10
                max_distance = 12
                initializer = antimatter_legion_Sub_galaxies
                effect = {
                    set_name = "NAME_CHONGXIAN"
                    save_global_event_target_as = antimatter_legion_Sub_galaxies7
                    random_system_planet = {
                        limit = {
                            has_planet_flag = born_antimatter_legion
                        }
                        planet_event = { id = DDT_FY.27 days = 70 }
                    }
                }
            }
            set_spawn_system_batch = end
            add_hyperlane = {
                from = event_target:antimatter_legion_Sub_galaxies7
                to = This
            }
        }
    }
}
#添加战争熔炉星系
#country_event = {
#    id = DDT_FY.100898
#    is_triggered_only = yes
#    hide_window = yes
#    fire_only_once = yes
#
#    immediate = {
#        set_spawn_system_batch = begin
#        no_scope = {
#            spawn_system = {
#                initializer = fallen_col_1
#                min_distance = 800
#                max_distance = 900
#                hyperlane = no
#            }
#        }
#        set_spawn_system_batch = end
#    }
#}
country_event = {
    id = DDT_FY.19
    hide_window = yes
    is_triggered_only = yes
    immediate = {
        set_spawn_system_batch = begin
        no_scope = {
            spawn_system = {
                min_distance = 20
                max_distance = 30
                min_orientation_angle = 1
                max_orientation_angle = 360
                initializer = The_Crucible_of_War
                hyperlane = no
                effect = {
                    save_global_event_target_as = The_Crucible_of_War
                }
            }
        }
        set_spawn_system_batch = end
        event_target:The_Crucible_of_War = {
            random_country = {
                limit = { is_country_type = antimatter_legion }
                save_event_target_as = ANTIMATTER_crisis
            }
            system_star = {
                create_antimatter_ship_se = yes
            }
            every_country = {
                limit = { has_event_chain = "antimatter_legion_chain" }
                add_event_chain_counter = {
                    event_chain = "antimatter_legion_chain"
                    counter = "antimatter_or"
                    amount = 1
                }
            }
            solar_system = {
                if = {
                    limit = { exists = starbase }
                    starbase = {
                        fleet = {
                            destroy_fleet = this
                        }
                    }
                }
                create_antimatter_starbase = { num = 8 }
            }
        }
        #every_country = { country_event = { id = DDT_FY.208 } }
    }
}
#添加毁灭星系
country_event = {
    id = DDT_FY.20
    hide_window = yes
    is_triggered_only = yes
    immediate = {
        set_spawn_system_batch = begin
        no_scope = {
            spawn_system = {
                min_distance = 20
                max_distance = 30
                initializer = antimatter_legion_home_system
                hyperlane = no
                effect = {
                    save_global_event_target_as = antimatter_legion_home_system
                }
            }
        }
        set_spawn_system_batch = end
        event_target:antimatter_legion_home_system = {
            random_country = {
                limit = { is_country_type = antimatter_legion }
                save_event_target_as = ANTIMATTER_crisis
            }
            every_country = {
                limit = { has_event_chain = "antimatter_legion_chain" }
                add_event_chain_counter = {
                    event_chain = "antimatter_legion_chain"
                    counter = "antimatter_or"
                    amount = 1
                }
            }
            solar_system = {
                if = {
                    limit = { exists = starbase }
                    starbase = {
                        fleet = {
                            destroy_fleet = this
                        }
                    }
                }
                create_antimatter_starbase_home = yes
            }
        }
        #every_country = { country_event = { id = DDT_FY.209 } }
    }
}
#####diplomatic#####
country_event = {
    id = DDT_FY.12
    diplomatic = yes
    is_triggered_only = yes
    title = DDT_FY.12_name
    desc = DDT_FY.12_desc

    trigger = {
        OR = {
            #From.Prev = {
            #    is_country_type = antimatter_legion
            #}
            From = {
                is_country_type = antimatter_legion
            }
        }
    }

    picture_event_data = {
        room = didui_0_room
        portrait = From.leader
    }

    option = {
        name = DDT_FY.12_name_one
        response_text = DDT_FY.12_desc_one
        is_dialog_only = yes
    }
    option = {
        name = DDT_FY.12_name_two
        response_text = DDT_FY.12_desc_two
        is_dialog_only = yes
    }
    option = {
        name = DDT_FY.12_name_three
    }
    option = {
        name = DDT_FY.12_name_four
    }
}
###first_star_order
planet_event = {
    id = DDT_FY.21
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        set_planet_flag = an_planet1
        create_species = {
            name = "NAME_antimatter_hm"
            class = "ANTIMATTER"
            namelist = "DOT_SR_HUMAN1"
            traits = {
                trait = "trait_The_Destruction_special"
            }
            effect = { save_global_event_target_as = ANTIMATTER_pop }
        }
        create_species = {
            name = random
            class = "HUIMIE"
            traits = {
                trait = "trait_The_Destruction_special"
            }
            effect = { save_global_event_target_as = HUIMIE_ruler }
        }
        create_country = {
            name = "NAME_ANTIMATTER"
            species = event_target:ANTIMATTER_pop
            authority = auth_imperial
            ethos = {
                ethic = ethic_gestalt_consciousness
            }
            civics = {
                civic = civic_The_Destruction_TZTG
            }
            type = "antimatter_legion"
            name_list = "DOT_SR_HUMAN1"
            flag = random
            effect = {
                set_graphical_culture = ai_01
                create_leader = {
                    class = commander
                    species = event_target:HUIMIE_ruler
                    name = random
                    effect = {
                        set_immortal = yes
                        save_event_target_as = antimatter_ruler
                    }
                }
                set_leader = event_target:antimatter_ruler
                create_ship_design = { design = "NAME_Crisis_XQTD" }
                add_ship_design = last_created_design
                create_ship_design = { design = XQTD_neutronstar_war_ship }
                add_ship_design = last_created_design
                create_ship_design = { design = "HMTT1" }
                add_ship_design = last_created_design
                create_ship_design = { design = "HMTT2" }
                add_ship_design = last_created_design
                save_event_target_as = ANTIMATTER_crisis
                save_global_event_target_as = ANTIMATTER_crisis
                set_variable = { which = the_num_of_antimatter_starbase value = 7 }
            }
        }
        every_owned_pop = { kill_pop = yes }
        reset_planet = yes
        set_name = "NAME_FENFENG"
        set_owner = event_target:ANTIMATTER_crisis
        set_controller = event_target:ANTIMATTER_crisis
        create_antimatter_ship_se = yes
        #create_neutron_ship = yes
        every_country = {
            limit = {
                OR = {
                    is_country_type = default
                    is_country_type = fallen_empire
                    is_country_type = awakened_fallen_empire
                }
            }
            establish_communications_no_message = event_target:ANTIMATTER_crisis
        }
        every_country = {
            limit = { has_event_chain = "antimatter_legion_chain" }
            add_event_chain_counter = {
                event_chain = "antimatter_legion_chain"
                counter = "antimatter_or"
                amount = 1
            }
        }
        #every_country = { country_event = { id = DDT_FY.201 } }
        solar_system = {
            if = {
                limit = { exists = starbase }
                starbase = {
                    fleet = {
                        destroy_fleet = this
                    }
                }
            }
            create_antimatter_starbase= { num = 1 }
        }
        create_point_of_interest = {
            id = an_crisis.1
            name = "NAME_FENFENG"
            event_chain = "antimatter_legion_chain"
            location = from
        }
    }
}
###second_star_order
planet_event = {
    id = DDT_FY.22
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        set_planet_flag = an_planet2
        random_country = {
            limit = { is_country_type = antimatter_legion }
            save_event_target_as = ANTIMATTER_crisis
        }
        reset_planet = yes
        set_name = "NAME_XINGXIAO"
        set_owner = event_target:ANTIMATTER_crisis
        set_controller = event_target:ANTIMATTER_crisis
        create_antimatter_ship_se = yes
        #create_neutron_ship = yes
        every_country = {
            limit = { has_event_chain = "antimatter_legion_chain" }
            add_event_chain_counter = {
                event_chain = "antimatter_legion_chain"
                counter = "antimatter_or"
                amount = 1
            }
        }
        #every_country = { country_event = { id = DDT_FY.202 } }
        solar_system = {
            if = {
                limit = { exists = starbase }
                starbase = {
                    fleet = {
                        destroy_fleet = this
                    }
                }
            }
            create_antimatter_starbase = { num = 2 }
        }
        create_point_of_interest = {
            id = an_crisis.2
            name = "NAME_XINGXIAO"
            event_chain = "antimatter_legion_chain"
            location = from
        }
    }
}
###third_star_order
planet_event = {
    id = DDT_FY.23
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        set_planet_flag = an_planet3
        random_country = {
            limit = { is_country_type = antimatter_legion }
            save_event_target_as = ANTIMATTER_crisis
        }
        reset_planet = yes
        set_name = "NAME_TIEMU"
        set_owner = event_target:ANTIMATTER_crisis
        set_controller = event_target:ANTIMATTER_crisis
        create_antimatter_ship_se = yes
        #create_neutron_ship = yes
        every_country = {
            limit = { has_event_chain = "antimatter_legion_chain" }
            add_event_chain_counter = {
                event_chain = "antimatter_legion_chain"
                counter = "antimatter_or"
                amount = 1
            }
        }
        #every_country = { country_event = { id = DDT_FY.203 } }
        solar_system = {
            if = {
                limit = { exists = starbase }
                starbase = {
                    fleet = {
                        destroy_fleet = this
                    }
                }
            }
            create_antimatter_starbase= { num = 3 }
        }
        create_point_of_interest = {
            id = an_crisis.3
            name = "NAME_TIEMU"
            event_chain = "antimatter_legion_chain"
            location = from
        }
    }
}
###fourth_star_order
planet_event = {
    id = DDT_FY.24
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        set_planet_flag = an_planet4
        random_country = {
            limit = { is_country_type = antimatter_legion }
            save_event_target_as = ANTIMATTER_crisis
        }
        reset_planet = yes
        set_name = "NAME_DUSHEN"
        set_owner = event_target:ANTIMATTER_crisis
        set_controller = event_target:ANTIMATTER_crisis
        create_antimatter_ship_se = yes
        #create_neutron_ship = yes
        every_country = {
            limit = { has_event_chain = "antimatter_legion_chain" }
            add_event_chain_counter = {
                event_chain = "antimatter_legion_chain"
                counter = "antimatter_or"
                amount = 1
            }
        }
        #every_country = { country_event = { id = DDT_FY.204 } }
        solar_system = {
            if = {
                limit = { exists = starbase }
                starbase = {
                    fleet = {
                        destroy_fleet = this
                    }
                }
            }
            create_antimatter_starbase = { num = 4 }
        }
        create_point_of_interest = {
            id = an_crisis.4
            name = "NAME_DUSHEN"
            event_chain = "antimatter_legion_chain"
            location = from
        }
    }
}
###fifth_star_order
planet_event = {
    id = DDT_FY.25
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        set_planet_flag = an_planet5
        random_country = {
            limit = { is_country_type = antimatter_legion }
            save_event_target_as = ANTIMATTER_crisis
        }
        reset_planet = yes
        set_name = "NAME_ZHIZUO"
        set_owner = event_target:ANTIMATTER_crisis
        set_controller = event_target:ANTIMATTER_crisis
        create_antimatter_ship_se = yes
        #create_neutron_ship = yes
        every_country = {
            limit = { has_event_chain = "antimatter_legion_chain" }
            add_event_chain_counter = {
                event_chain = "antimatter_legion_chain"
                counter = "antimatter_or"
                amount = 1
            }
        }
        #every_country = { country_event = { id = DDT_FY.205 } }
        solar_system = {
            if = {
                limit = { exists = starbase }
                starbase = {
                    fleet = {
                        destroy_fleet = this
                    }
                }
            }
            create_antimatter_starbase = { num = 5 }
        }
        create_point_of_interest = {
            id = an_crisis.5
            name = "NAME_ZHIZUO"
            event_chain = "antimatter_legion_chain"
            location = from
        }
    }
}
###sixth_star_order
planet_event = {
    id = DDT_FY.26
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        set_planet_flag = an_planet6
        random_country = {
            limit = { is_country_type = antimatter_legion }
            save_event_target_as = ANTIMATTER_crisis
        }
        reset_planet = yes
        set_name = "NAME_TUNXING"
        set_owner = event_target:ANTIMATTER_crisis
        set_controller = event_target:ANTIMATTER_crisis
        create_antimatter_ship_se = yes
        #create_neutron_ship = yes
        every_country = {
            limit = { has_event_chain = "antimatter_legion_chain" }
            add_event_chain_counter = {
                event_chain = "antimatter_legion_chain"
                counter = "antimatter_or"
                amount = 1
            }
        }
        #every_country = { country_event = { id = DDT_FY.206 } }
        solar_system = {
            if = {
                limit = { exists = starbase }
                starbase = {
                    fleet = {
                        destroy_fleet = this
                    }
                }
            }
            create_antimatter_starbase = { num = 6 }

        }
        create_point_of_interest = {
            id = an_crisis.6
            name = "NAME_TUNXING"
            event_chain = "antimatter_legion_chain"
            location = from
        }
    }
}
###seventh_star_order
planet_event = {
    id = DDT_FY.27
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        set_planet_flag = an_planet7
        random_country = {
            limit = { is_country_type = antimatter_legion }
            save_event_target_as = ANTIMATTER_crisis
        }
        reset_planet = yes
        set_name = "NAME_CHONGXIAN"
        set_owner = event_target:ANTIMATTER_crisis
        set_controller = event_target:ANTIMATTER_crisis
        create_antimatter_ship_se = yes
        #create_neutron_ship = yes
        every_country = {
            limit = { has_event_chain = "antimatter_legion_chain" }
            add_event_chain_counter = {
                event_chain = "antimatter_legion_chain"
                counter = "antimatter_or"
                amount = 1
            }
        }
        #every_country = { country_event = { id = DDT_FY.207 } }
        solar_system = {
            if = {
                limit = { exists = starbase }
                starbase = {
                    fleet = {
                        destroy_fleet = this
                    }
                }
            }
            create_antimatter_starbase = { num = 7 }
        }
        create_point_of_interest = {
            id = an_crisis.7
            name = "NAME_CHONGXIAN"
            event_chain = "antimatter_legion_chain"
            location = from
        }
    }
}
###################### 提 示 事 件 ######################
country_event = {
    id = DDT_FY.201
    title = DDT_FY.201_name
    desc = DDT_FY.201_desc
    is_triggered_only = yes
    picture = GFX_evt_crisis_1

    option = {
        name = OK
    }
}
country_event = {
    id = DDT_FY.202
    title = DDT_FY.202_name
    desc = DDT_FY.202_desc
    is_triggered_only = yes
    picture = GFX_evt_crisis_1
    option = {
        name = OK
    }
}
country_event = {
    id = DDT_FY.203
    title = DDT_FY.203_name
    desc = DDT_FY.203_desc
    is_triggered_only = yes
    picture = GFX_evt_crisis_1
    option = {
        name = OK
    }
}
country_event = {
    id = DDT_FY.204
    title = DDT_FY.204_name
    desc = DDT_FY.204_desc
    is_triggered_only = yes
    picture = GFX_evt_crisis_1
    option = {
        name = OK
    }
}
country_event = {
    id = DDT_FY.205
    title = DDT_FY.205_name
    desc = DDT_FY.205_desc
    is_triggered_only = yes
    picture = GFX_evt_crisis_1
    option = {
        name = OK
    }
}
country_event = {
    id = DDT_FY.206
    title = DDT_FY.206_name
    desc = DDT_FY.206_desc
    is_triggered_only = yes
    picture = GFX_evt_crisis_1
    option = {
        name = OK
    }
}
country_event = {
    id = DDT_FY.207
    title = DDT_FY.207_name
    desc = DDT_FY.207_desc
    is_triggered_only = yes
    picture = GFX_evt_crisis_1
    option = {
        name = OK
    }
}
country_event = {
    id = DDT_FY.208
    title = DDT_FY.208_name
    desc = DDT_FY.208_desc
    is_triggered_only = yes
    picture = GFX_evt_crisis_1
    option = {
        name = OK
    }
}
country_event = {
    id = DDT_FY.209
    title = DDT_FY.209_name
    desc = DDT_FY.209_desc
    is_triggered_only = yes
    picture = GFX_evt_crisis_1
    option = {
        name = OK
    }
}
###################### 舰队机制  ######################
#在至少四个毁灭之塔被摧毁前战争熔炉星系的毁灭之塔和在至少七个毁灭之塔被摧毁前亚德丽芬星系的毁灭天塔不得被摧毁。
starbase_event = {
    id = DDT_FY.300
    hide_window = yes
    is_triggered_only = yes
    trigger = {
        NOT = { has_global_flag = can_not_use_DDT_FY.300 }
        #has_starbase_size = HMTT
        has_starbase_flag = antimatter_starbase_home
    }
    immediate = {
        every_system = {
            limit = {
                has_star_flag = HMTT_center_of_galaxy
            }
            save_global_event_target_as = HMTT_center_of_galaxy
        }
        event_target:HMTT_center_of_galaxy.system_star = {
            create_starbase = {
                size = HMTT
                owner = event_target:ANTIMATTER_crisis
                effect = {

                }
            }
        }
    }
}
starbase_event = {
    id = DDT_FY.301
    hide_window = yes
    is_triggered_only = yes
    trigger = {
        NOT = { has_global_flag = can_not_use_DDT_FY.301 }
        #has_starbase_size = HMTT2
        has_starbase_flag = antimatter_starbase8
    }
    immediate = {
        every_system = {
            limit = {
                has_star_flag = HMTT_center_of_The_Crucible_of_War
            }
            save_global_event_target_as = HMTT_center_of_The_Crucible_of_War
        }
        event_target:HMTT_center_of_The_Crucible_of_War.system_star = {
            create_starbase = {
                size = HMTT2
                owner = event_target:ANTIMATTER_crisis
                effect = {

                }
            }
        }
    }
}

starbase_event = {
    id = DDT_FY.302
    hide_window = yes
    is_triggered_only = yes
    trigger = {
        OR = {
            has_starbase_flag = antimatter_starbase1
            has_starbase_flag = antimatter_starbase2
            has_starbase_flag = antimatter_starbase3
            has_starbase_flag = antimatter_starbase4
            has_starbase_flag = antimatter_starbase5
            has_starbase_flag = antimatter_starbase6
            has_starbase_flag = antimatter_starbase7
            has_starbase_flag = antimatter_starbase8
        }
    }
    immediate = {
        This.owner = {
            change_variable = { which = the_num_of_antimatter_starbase value = -1 }
        }
        if = {
            limit = {
                check_variable = { which = the_num_of_antimatter_starbase value < 4 }
            }
            set_global_flag = destroy_HMTT
        }
    }
}
fleet_event = {
    id = DDT_FY.305
    hide_window = yes
    is_triggered_only = yes
    trigger = {
        From = {
            OR = {
                has_star_flag = antimatter_legion_home_system
                has_star_flag = The_Crucible_of_War
            }
        }
    }
    immediate = {
        every_country = {
            limit = {
                is_country_type = antimatter_legion
            }
            save_global_event_target_as = antimatter_legion
        }
        if = {
            limit = {
                event_target:antimatter_legion = {
                    check_variable = { which = the_num_of_antimatter_starbase value = 7 }
                }
            }
            add_modifier = { modifier = XQTD_crisis_buff17 }
        }
        if = {
            limit = {
                event_target:antimatter_legion = {
                    check_variable = { which = the_num_of_antimatter_starbase value = 6 }
                }
            }
            add_modifier = { modifier = XQTD_crisis_buff18 }
        }
        if = {
            limit = {
                event_target:antimatter_legion = {
                    check_variable = { which = the_num_of_antimatter_starbase value = 5 }
                }
            }
            add_modifier = { modifier = XQTD_crisis_buff19 }
        }
        if = {
            limit = {
                event_target:antimatter_legion = {
                    check_variable = { which = the_num_of_antimatter_starbase value = 4 }
                }
            }
            add_modifier = { modifier = XQTD_crisis_buff20 }
        }
        if = {
            limit = {
                event_target:antimatter_legion = {
                    check_variable = { which = the_num_of_antimatter_starbase value = 3 }
                }
            }
            add_modifier = { modifier = XQTD_crisis_buff21 }
        }
        if = {
            limit = {
                event_target:antimatter_legion = {
                    check_variable = { which = the_num_of_antimatter_starbase value = 2 }
                }
            }
            add_modifier = { modifier = XQTD_crisis_buff22 }
        }
        if = {
            limit = {
                event_target:antimatter_legion = {
                    check_variable = { which = the_num_of_antimatter_starbase value = 1 }
                }
            }
            add_modifier = { modifier = XQTD_crisis_buff23 }
        }
    }
}

ship_event = {
    id = DDT_FY.303
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        save_global_event_target_as = create_antimatter_starbase_home_ship
        set_variable = {
            which = create_antimatter_starbase_home_ship
            value = 999
        }
    }
}
ship_event = {
    id = DDT_FY.304
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        is_ship_size = HMTT
        NOT = {
            has_global_flag = destory_antimatter_starbase_home
        }
        check_variable = {
            which = create_antimatter_starbase_home_ship
            value > 0
        }
    }

    immediate = {
        if = {
            limit = {
                check_variable = {
                    which = YHTT_ship_health_bar_count
                    value > 0
                }
            }
            repair_ship = yes
            set_disabled = no
            subtract_variable = {
                which = YHTT_ship_health_bar_count
                value = 1
            }
        }
        if = {
            limit = {
                check_variable = {
                    which = YHTT_ship_health_bar_count
                    value = 0
                }
            }
            destroy_ship = ROOT
            every_country = {
                country_event = { id = DDT_FY.306 }
            }
            every_country = {
                limit = {
                    is_country_type = antimatter_legion
                }
                destroy_country = yes
            }
        }
    }
}
country_event = {
    id = DDT_FY.307
    hide_window = yes
    is_triggered_only = yes
    trigger = {
        NOT = { has_global_flag = destory_antimatter_starbase_home }
        #has_starbase_size = HMTT
        FromFrom = {
            is_ship_size = HMTT2
        }
    }
    immediate = {
        FromFrom = {
            change_variable = { which = destory_HMTT value = 1 }
            if = {
                limit = {
                    check_variable = {
                        which = destory_HMTT value >= 4
                    }
                }
                set_global_flag = destory_antimatter_starbase_home
            }
        }
    }
}
#舰队增援只会刷在战争熔炉星系，每年增添7-n单位舰队
planet_event = {
    id = DDT_FY.310
    hide_window = yes
    is_triggered_only = yes
    trigger = {
        this.starbase = {
            exists = owner
            owner = {
                is_country_type = antimatter_legion
            }
        }
    }
    immediate = {
        while = {
            count = this.starbase.owner.the_num_of_antimatter_starbase
            create_antimatter_ship_se = yes
        }
        planet_event = { id = DDT_FY.310 days = 360 }
    }
}
#获胜
starbase_event = {
    id = DDT_FY.309
    hide_window = yes
    is_triggered_only = yes
    trigger = {
        OR = {
            has_starbase_flag = antimatter_starbase_home
        }
    }
    immediate = {
        every_country = { country_event = { id = DDT_FY.306 } }
        every_country = {
            limit = {
                is_country_type = antimatter_legion
            }
            destroy_country = yes
        }
    }
}
country_event = {
    id = DDT_FY.306
    title = DDT_FY.306_title
    desc = DDT_FY.306_desc
    is_triggered_only = yes
    option = {
        name = DDT_FY.306_desc_a
    }
    option = {
        name = DDT_FY.306_desc_b
    }
}
######################  U I 事 件 (建议不要动)   ######################
country_event = {
    id = DDT_FY.1999
    is_triggered_only = yes
    hide_window = yes

    trigger = {
        is_antimatter_must = yes
        is_ai =  no
    }

    immediate = {
        set_country_flag = allow_set_xt_crisis_global
        event_target:global_event_country = {
            set_variable = { which = XQTD_crisis_stage value = 1 }
        }
    }
}
country_event = {
    id = DDT_FY.2000
    is_triggered_only = yes
    diplomatic = yes
    custom_gui = "XQTD_GLOBAL_SET"

    trigger = {
        is_antimatter_must = yes
    }

    immediate = {
        event_target:global_event_country = {
            set_country_flag = allow_add_xtui
            set_country_flag = allow_sub_xtui
        }
        set_country_flag = allow_set_xt_crisis_global
        if = {
            limit = {
                NOT = {
                    OR = {
                        has_country_flag = allow_stage2_xt
                        has_country_flag = allow_stage3_xt
                        has_country_flag = allow_stage4_xt
                    }
                }
            }
            set_country_flag = allow_stage1_xt
        }
    }
    option = {
        name = OK
    }
}
######################  舰 队 事 件 (建议不要动)  ######################
#舰队行为主触发#   ##该模板取自地砖大佬公用素材##
fleet_event = {
    id = DDT_FY.4000
    hide_window = yes
    is_triggered_only = yes
    trigger = {
        exists = this
        has_fleet_flag = XT_Crisis_1_fleet
        owner = { is_country_type = antimatter_legion }
    }
    immediate = {
        queue_actions = {
            repeat = {
                effect = {
                    id = SRA_RE_Crisis.39.e0
                    if = {
                        limit = { count_system = {
                            limit = { check_variable = { which = XT_Crisis_1_fleet_id value > 0 } }
                            count = all
                        } }
                        every_system = {
                            set_variable = { which = XT_Crisis_1_fleet_id value = 0 }
                            clear_variable = XT_Crisis_1_fleet_id
                        }
                    }
                    if = {
                        limit = { has_fleet_flag = XT_Crisis_cannot_find_path }
                        random_system = {
                            limit = {
                                OR = {
                                    AND = {
                                        exists = starbase
                                    }
                                    any_system_planet = { OR = { is_colony = yes is_colonizable = yes } }
                                }
                            }
                            random_system_planet = { ROOT = { set_location = { target = PREV distance = 5 angle = random } } }
                        }
                        remove_fleet_flag = XT_Crisis_cannot_find_path
                    }
                }
                find_closest_system = {
                    trigger = {
                        id = SRA_RE_Crisis.39.t1
                        OR = {
                            AND = {
                                exists = starbase
                            }
                            any_system_planet = { OR = { is_colony = yes is_colonizable = yes } }
                        }
                        ROOT = { can_access_system = prev }
                        check_variable = { which = XT_Crisis_1_fleet_id value < 1 }
                    }
                    found_system = {
                        effect = {
                            id = SRA_RE_Crisis.39.e1
                            set_variable = { which = XT_Crisis_1_fleet_id value = root.xfleet_id }
                        }
                        move_to = this
                        repeat = {
                            while = {
                                id = SRA_RE_Crisis.39.t2
                                any_system_planet = { OR = { is_colony = yes is_colonizable = yes } }
                            }
                            find_closest_planet = {
                                trigger = {
                                    id = SRA_RE_Crisis.39.t3
                                    OR = { is_colony = yes is_colonizable = yes }
                                }
                                found_planet = {
                                    orbit_planet = this
                                    effect = {
                                        id = SRA_RE_Crisis.39.e2
                                        ROOT = { set_fleet_flag = XT_Crisis_bombarding_planet }
                                        if = {
                                            #未殖民宜居星球过2个月炸掉
                                            limit = { is_colony = no is_colonizable = yes }
                                            set_planet_flag = XT_Crisis_target_planet
                                            planet_event = { id = DDT_FY.4001 days = 60 }
                                        }
                                        if = {
                                            #已殖民宜居星球过2个月炸掉
                                            limit = { is_colony = yes is_colonizable = yes }
                                            set_planet_flag = XT_Crisis_target_planet
                                            planet_event = { id = DDT_FY.4001 days = 60 }
                                        }
                                    }
                                    repeat = {
                                        while = {
                                            id = SRA_RE_Crisis.39.t4
                                            ROOT = { has_fleet_flag = XT_Crisis_bombarding_planet }
                                        }
                                        effect = {
                                            id = SRA_RE_Crisis.39.e3
                                            if = {
                                                limit = { is_colony = no is_colonizable = no }
                                                ROOT = { remove_fleet_flag = XT_Crisis_bombarding_planet }
                                            }
                                        }
                                        wait = { duration = 5 random = 10 }
                                    }
                                }
                            }
                            move_to = this							# move away from the planet
                            wait = { duration = 5 random = 10 }
                        }
                        wait = { duration = 5 random = 10 }
                    }
                    failed = { find_closest_system = {
                        trigger = {
                            id = SRA_RE_Crisis.39.t9
                            ROOT = { can_access_system = prev }
                            check_variable = { which = XT_Crisis_1_fleet_id value < 1 }
                        }
                        found_system = {
                            effect = {
                                id = SRA_RE_Crisis.39.t91
                                set_variable = { which = XT_Crisis_1_fleet_id value = root.xfleet_id }
                            }
                            move_to = this
                            repeat = {
                                while = {
                                    id = SRA_RE_Crisis.39.t10
                                    any_system_planet = { OR = { is_colony = yes is_colonizable = yes } }
                                }
                                find_closest_planet = {
                                    trigger = {
                                        id = SRA_RE_Crisis.39.t11
                                        OR = { is_colony = yes is_colonizable = yes }
                                    }
                                    found_planet = {
                                        orbit_planet = this
                                        effect = {
                                            id = SRA_RE_Crisis.39.e10
                                            ROOT = { set_fleet_flag = XT_Crisis_bombarding_planet }
                                            if = {
                                                limit = { is_colony = no is_colonizable = yes }
                                                set_planet_flag = XT_Crisis_target_planet
                                                planet_event = { id = DDT_FY.4001 days = 30 }
                                            }
                                        }
                                        repeat = {
                                            while = {
                                                id = SRA_RE_Crisis.39.t12
                                                ROOT = { has_fleet_flag = XT_Crisis_bombarding_planet }
                                            }
                                            effect = {
                                                id = SRA_RE_Crisis.39.e11
                                                if = {
                                                    limit = { is_colony = no is_colonizable = no }
                                                    ROOT = { remove_fleet_flag = XT_Crisis_bombarding_planet }
                                                }
                                            }
                                            wait = { duration = 5 random = 10 }
                                        }
                                    }
                                }
                                move_to = this											# move away from the planet
                                wait = { duration = 5 random = 10 }
                            }
                            wait = { duration = 5 random = 10 }
                        }
                        failed = { effect = { id = SRA_RE_Crisis.39.e13 ROOT = { set_fleet_flag = XT_Crisis_cannot_find_path } } wait = 200 }
                    }
                    }
                }
            }
        }
    }
}
planet_event = {
    id = DDT_FY.4001
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        if = {
            limit = {
                OR = {
                    is_planet_class = pc_habitat_honkai
                    is_planet_class = pc_habitat_shielded
                    is_planet_class = pc_habitat
                    is_planet_class = pc_ringworld_habitable
                    is_planet_class = pc_xianzhou_world
                    is_planet_class = pc_habitat_planet_class
                    is_planet_class = pc_astral_express
                }
            }
            destroy_colony = yes
            remove_planet = yes
        }
        else = {
            destroy_colony = yes
            change_pc = pc_broken
        }
    }
}
fleet_event = {
    id = DDT_FY.4002
    hide_window = yes
    is_triggered_only = yes
    trigger = {
        exists = this
        has_fleet_flag = GWDG_Crisis_1_fleet
        #owner = { is_country_type = GW_wonders_crisis_country }
    }
    immediate = {
        queue_actions = {
            repeat = {
                effect = {
                    id = SRA_RE_Crisis.39.e0
                    if = {
                        limit = {
                            count_system = {
                                limit = { check_variable = { which = GWDG_Crisis_1_fleet_id value > 0 } }
                                count = all
                            }
                        }
                        every_system = {
                            set_variable = { which = GWDG_Crisis_1_fleet_id value = 0 }
                            clear_variable = GWDG_Crisis_1_fleet_id
                        }
                    }
                    if = {
                        limit = { has_fleet_flag = GWDG_Crisis_cannot_find_path }
                        random_system = {
                            limit = {
                                OR = {
                                    AND = {
                                        exists = starbase
                                    }
                                    any_system_planet = { OR = { is_colony = yes is_colonizable = yes } }
                                }
                            }
                            random_system_planet = { ROOT = { set_location = { target = PREV distance = 5 angle = random } } }
                        }
                        remove_fleet_flag = GWDG_Crisis_cannot_find_path
                    }
                }
                find_closest_system = {
                    trigger = {
                        id = SRA_RE_Crisis.39.t1
                        OR = {
                            AND = {
                                exists = starbase
                            }
                            any_system_planet = { OR = { is_star = yes } NOT = { is_planet_class = pc_black_hole } }
                        }
                        ROOT = { can_access_system = prev }
                        check_variable = { which = GWDG_Crisis_1_fleet_id value < 1 }
                    }
                    found_system = {
                        effect = {
                            id = SRA_RE_Crisis.39.e1
                            set_variable = { which = GWDG_Crisis_1_fleet_id value = root.xfleet_id }
                        }
                        move_to = this
                        repeat = {
                            while = {
                                id = SRA_RE_Crisis.39.t2
                                any_system_planet = { AND = { is_star = yes } NOT = { is_planet_class = pc_black_hole } }
                            }
                            find_closest_planet = {
                                trigger = {
                                    id = SRA_RE_Crisis.39.t3
                                    OR = { is_star = yes } NOT = { is_planet_class = pc_black_hole }
                                }
                                found_planet = {
                                    orbit_planet = this
                                    effect = {
                                        id = SRA_RE_Crisis.39.e2
                                        ROOT = { set_fleet_flag = GWDG_Crisis_bombarding_planet }
                                    }
                                    destroy_planet = {
                                        target = This
                                    }
                                    repeat = {
                                        while = {
                                            id = SRA_RE_Crisis.39.t4
                                            ROOT = { has_fleet_flag = GWDG_Crisis_bombarding_planet }
                                        }
                                        effect = {
                                            id = SRA_RE_Crisis.39.e3
                                            if = {
                                                limit = { OR = { is_star = yes } NOT = { is_planet_class = pc_black_hole } }
                                                ROOT = { remove_fleet_flag = GWDG_Crisis_bombarding_planet }
                                            }
                                        }
                                        wait = { duration = 5 random = 10 }
                                    }
                                }
                            }
                            move_to = this							# move away from the planet
                            wait = { duration = 5 random = 10 }
                        }
                        wait = { duration = 5 random = 10 }
                    }
                    failed = { find_closest_system = {
                        trigger = {
                            id = SRA_RE_Crisis.39.t9
                            ROOT = { can_access_system = prev }
                            check_variable = { which = GWDG_Crisis_1_fleet_id value < 1 }
                        }
                        found_system = {
                            effect = {
                                id = SRA_RE_Crisis.39.t91
                                set_variable = { which = GWDG_Crisis_1_fleet_id value = root.xfleet_id }
                            }
                            move_to = this
                            repeat = {
                                while = {
                                    id = SRA_RE_Crisis.39.t10
                                    any_system_planet = { OR = { is_star = yes } NOT = { is_planet_class = pc_black_hole } }
                                }
                                find_closest_planet = {
                                    trigger = {
                                        id = SRA_RE_Crisis.39.t11
                                        OR = { is_star = yes } NOT = { is_planet_class = pc_black_hole }
                                    }
                                    found_planet = {
                                        orbit_planet = this
                                        effect = {
                                            id = SRA_RE_Crisis.39.e10
                                            ROOT = { set_fleet_flag = GWDG_Crisis_bombarding_planet }
                                            if = {
                                                limit = { OR = { is_star = yes } NOT = { is_planet_class = pc_black_hole } }
                                                set_planet_flag = GWDG_Crisis_target_planet
                                            }
                                        }
                                        destroy_planet = {
                                            target = This
                                        }
                                        repeat = {
                                            while = {
                                                id = SRA_RE_Crisis.39.t12
                                                ROOT = { has_fleet_flag = GWDG_Crisis_bombarding_planet }
                                            }
                                            effect = {
                                                id = SRA_RE_Crisis.39.e11
                                                if = {
                                                    limit = { OR = { is_star = yes } NOT = { is_planet_class = pc_black_hole } }
                                                    ROOT = { remove_fleet_flag = GWDG_Crisis_bombarding_planet }
                                                }
                                            }
                                            wait = { duration = 5 random = 10 }
                                        }
                                    }
                                }
                                move_to = this											# move away from the planet
                                wait = { duration = 5 random = 10 }
                            }
                            wait = { duration = 5 random = 10 }
                        }
                        failed = { effect = { id = SRA_RE_Crisis.39.e13 ROOT = { set_fleet_flag = GWDG_Crisis_cannot_find_path } } wait = 200 }
                    }
                    }
                }
            }
        }
        fleet_event = { id = DDT_FY.4002 days = 150 }
    }
}